#!/usr/bin/env node
'use strict';

const http = require('http');
const { connect } = require('../_helpers/connect');

const DB_NAME = 'theam';
const MONGODB_URI = 'mongodb://mongo:27017';
const SERVER_PORT = 5000;
const mongoUrl = `${MONGODB_URI}/${DB_NAME}`;

let server;

connect(mongoUrl).then((db) => {
    const app = require('../app.js')(db);

    server = http.createServer(app);
    server.listen(SERVER_PORT);
    console.log('Server listening on port', SERVER_PORT);
}).catch((err) => {
    console.log('err', err);
    process.exit(1);
});
